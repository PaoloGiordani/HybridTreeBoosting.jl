<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Installation and Introduction to the Python bindings of HTBoost.jl · HybridTreeBoosting.jl</title><meta name="title" content="Installation and Introduction to the Python bindings of HTBoost.jl · HybridTreeBoosting.jl"/><meta property="og:title" content="Installation and Introduction to the Python bindings of HTBoost.jl · HybridTreeBoosting.jl"/><meta property="twitter:title" content="Installation and Introduction to the Python bindings of HTBoost.jl · HybridTreeBoosting.jl"/><meta name="description" content="Documentation for HybridTreeBoosting.jl."/><meta property="og:description" content="Documentation for HybridTreeBoosting.jl."/><meta property="twitter:description" content="Documentation for HybridTreeBoosting.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">HybridTreeBoosting.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../Parameters/">Parameters</a></li><li><a class="tocitem" href="../../JuliaAPI/">API</a></li><li><a class="tocitem" href="../../Tutorials/">Tutorials (Julia)</a></li><li><a class="tocitem" href="../../Examples/">Examples (Julia)</a></li><li><a class="tocitem" href="../../Tutorials_R/">Tutorials (R)</a></li><li><a class="tocitem" href="../../Tutorials_py/">Tutorials (Python)</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Installation and Introduction to the Python bindings of HTBoost.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Installation and Introduction to the Python bindings of HTBoost.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/PaoloGiordani/HybridTreeBoosting.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/PaoloGiordani/HybridTreeBoosting.jl.git" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Installation-and-Introduction-to-the-Python-bindings-of-HTBoost.jl"><a class="docs-heading-anchor" href="#Installation-and-Introduction-to-the-Python-bindings-of-HTBoost.jl">Installation and Introduction to the Python bindings of HTBoost.jl</a><a id="Installation-and-Introduction-to-the-Python-bindings-of-HTBoost.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Installation-and-Introduction-to-the-Python-bindings-of-HTBoost.jl" title="Permalink"></a></h1><h2 id="Install-Julia"><a class="docs-heading-anchor" href="#Install-Julia">Install Julia</a><a id="Install-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Install-Julia" title="Permalink"></a></h2><p>Install Julia, if required. This may not be necessary, as juliacall should automatically download a suitable version of Julia if required.  Julia can be downloaded from (https://julialang.org/downloads/)</p><h2 id="Each-script-should-start-with-the-following-3-steps"><a class="docs-heading-anchor" href="#Each-script-should-start-with-the-following-3-steps">Each script should start with the following 3 steps</a><a id="Each-script-should-start-with-the-following-3-steps-1"></a><a class="docs-heading-anchor-permalink" href="#Each-script-should-start-with-the-following-3-steps" title="Permalink"></a></h2><h4 id="1.-Install-juliacall-package-(*pip-install-juliacall*),-then-load-it-as"><a class="docs-heading-anchor" href="#1.-Install-juliacall-package-(*pip-install-juliacall*),-then-load-it-as">1. Install juliacall package (<em>pip install juliacall</em>), then load it as</a><a id="1.-Install-juliacall-package-(*pip-install-juliacall*),-then-load-it-as-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Install-juliacall-package-(*pip-install-juliacall*),-then-load-it-as" title="Permalink"></a></h4><pre><code class="language-py hljs">from juliacall import Main as jl, convert as jlconvert</code></pre><h4 id="2.-Install-the-Julia-packages-Distributed,-DataFrames,-HTBoost,-and-load-them."><a class="docs-heading-anchor" href="#2.-Install-the-Julia-packages-Distributed,-DataFrames,-HTBoost,-and-load-them.">2. Install the Julia packages Distributed, DataFrames, HTBoost, and load them.</a><a id="2.-Install-the-Julia-packages-Distributed,-DataFrames,-HTBoost,-and-load-them.-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Install-the-Julia-packages-Distributed,-DataFrames,-HTBoost,-and-load-them." title="Permalink"></a></h4><p>Installation is needed only once, and can be done from Julia or in Python as follows:</p><pre><code class="language-py hljs">jl.seval(&quot;using Pkg&quot;)
jl.seval(&quot;Pkg.add(&#39;Distributed&#39;)&quot;)
jl.seval(&quot;Pkg.add(&#39;HybridTreeBoosting&#39;)&quot;)
#Alternatively, the following will work even if the package is not in the registry.
#jl.seval(&#39;using Pkg; Pkg.add(&quot;https://github.com/PaoloGiordani/HybridTreeBoosting.jl&quot;)&#39;)</code></pre><p>Load the packages in Julia</p><pre><code class="language-py hljs">jl.seval(&quot;using DataFrames&quot;)  
jl.seval(&quot;using HybridTreeBoosting&quot;)   # HTBoost must be installed in Julia </code></pre><h4 id="3.-Set-the-desired-number-of-workers-(cores)-to-be-used-in-parallel."><a class="docs-heading-anchor" href="#3.-Set-the-desired-number-of-workers-(cores)-to-be-used-in-parallel.">3. Set the desired number of workers (cores) to be used in parallel.</a><a id="3.-Set-the-desired-number-of-workers-(cores)-to-be-used-in-parallel.-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Set-the-desired-number-of-workers-(cores)-to-be-used-in-parallel." title="Permalink"></a></h4><p>Note: Python incurs this compile time cost every time the program is run (unlike Julia and R). The compile cost increases in the number of workes, and is around 80&#39;&#39; for 8 workers.</p><pre><code class="language-py hljs">jl.seval(&quot;using Distributed&quot;)
jl.seval(&quot;number_workers = 8; nprocs()&lt;number_workers ? addprocs( number_workers - nprocs()  ) : addprocs(0)&quot;)
jl.seval(&quot;@everywhere using HybridTreeBoosting&quot;)</code></pre><h2 id="Running-HTBoost"><a class="docs-heading-anchor" href="#Running-HTBoost">Running HTBoost</a><a id="Running-HTBoost-1"></a><a class="docs-heading-anchor-permalink" href="#Running-HTBoost" title="Permalink"></a></h2><p>The most important functions in HTBoost are</p><pre><code class="language-py hljs">param  = jl.HTBparam()           # defines the model     
data   = jl.HTBparam(y,x,param)  # defines the data, including optional features such as names, weights, time
output = jl.HTBfit(data,param)   # fits the model 
yf     = jl.HTBpredict(x_predict,output)
t      = jl.HTBweightedtau(output,data)  # variable importance and smoothness
t      = jl.HTBpartialplot(data,output,[1,2])  # partial dependence plots, here for the first two features  </code></pre><h2 id="Further-notes-on-using-HybridTreeBoosting-in-Python"><a class="docs-heading-anchor" href="#Further-notes-on-using-HybridTreeBoosting-in-Python">Further notes on using HybridTreeBoosting in Python</a><a id="Further-notes-on-using-HybridTreeBoosting-in-Python-1"></a><a class="docs-heading-anchor-permalink" href="#Further-notes-on-using-HybridTreeBoosting-in-Python" title="Permalink"></a></h2><h3 id="To-translate-the-Julia-tutorials-in-Python"><a class="docs-heading-anchor" href="#To-translate-the-Julia-tutorials-in-Python">To translate the Julia tutorials in Python</a><a id="To-translate-the-Julia-tutorials-in-Python-1"></a><a class="docs-heading-anchor-permalink" href="#To-translate-the-Julia-tutorials-in-Python" title="Permalink"></a></h3><ul><li>Change Julia symbols to Python strings. e.g. :modality to &#39;modality&#39; or &quot;modality&quot;, :On to &#39;On&#39; on &quot;On&quot;</li><li>Change Julia true/false to True/False </li><li>The output of each function in Julia is a named tuple. Its elements can be accessed in the usual way, e.g. </li></ul><pre><code class="language-py hljs">  ntrees = output.ntrees  </code></pre><h3 id="Getting-your-data-from-Python-to-HTBoost"><a class="docs-heading-anchor" href="#Getting-your-data-from-Python-to-HTBoost">Getting your data from Python to HTBoost</a><a id="Getting-your-data-from-Python-to-HTBoost-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-your-data-from-Python-to-HTBoost" title="Permalink"></a></h3><p>If y and x are numerical matrices with no missing data, they can be taken into HTBdata() directly, e.g. </p><pre><code class="language-py hljs">x  = np.random.normal(0,1,n)
u  = np.random.normal(0,1,n)
y  = x + np.random.normal(0,1,n)

param   = jl.HTBparam(modality=&#39;accurate&#39;)  
data   = jl.HTBdata(y,x,param)
output = jl.HTBfit(data,param)</code></pre><p>This will not work properly if there are missing data (<em>NaN</em> in Python, <em>NaN</em> or <em>missing</em> in Julia). See <a href="../../tutorials/Missing/">Missing data</a>) for how HTBoost deals with missing data internally, delivering superior accuracy if the underlying function is at least partially smooth.  </p><p>When there are missing data, or when y and/or x contain strings (categorical features), we must work translate our Python dataframe into a Julia DataFrame, which is then fed to HTBdata(), e.g. (continuing from the previous example)</p><pre><code class="language-py hljs">fnames = [&#39;x1&#39;]
df = pd.DataFrame(x, columns=fnames)  # convert to pandas dataframe
jl.seval(&quot;using DataFrames&quot;)  
x = jl.DataFrame(df)

data     = jl.HTBdata(y,x,param,fnames=colnames(df))    # pass the column names 
output   = jl.HTBfit(data,param)                        
</code></pre><p>Columns of string values are automatically interpreted by HTBoost as a categorical. If some categorical features are represented by numerical values, it is necessary to list them in param (in which case all categorical features, even strings, must be listed). This can be done with a vector of their column positions.</p><pre><code class="language-py hljs">param = jl.HTBparam(cat_features=[3])
data  = jl.HTBdata(y,x,param)    # passing the column names is optional
</code></pre></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Friday 14 March 2025 10:44">Friday 14 March 2025</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

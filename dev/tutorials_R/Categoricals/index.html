<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>- · HybridTreeBoosting.jl</title><meta name="title" content="- · HybridTreeBoosting.jl"/><meta property="og:title" content="- · HybridTreeBoosting.jl"/><meta property="twitter:title" content="- · HybridTreeBoosting.jl"/><meta name="description" content="Documentation for HybridTreeBoosting.jl."/><meta property="og:description" content="Documentation for HybridTreeBoosting.jl."/><meta property="twitter:description" content="Documentation for HybridTreeBoosting.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">HybridTreeBoosting.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../Parameters/">Parameters</a></li><li><a class="tocitem" href="../../JuliaAPI/">API</a></li><li><a class="tocitem" href="../../Tutorials/">Tutorials (Julia)</a></li><li><a class="tocitem" href="../../Examples/">Examples (Julia)</a></li><li><a class="tocitem" href="../../Tutorials_R/">Tutorials (R)</a></li><li><a class="tocitem" href="../../Tutorials_py/">Tutorials (Python)</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>-</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>-</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/PaoloGiordani/HybridTreeBoosting.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/PaoloGiordani/HybridTreeBoosting.jl.git" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Categoricals-features"><a class="docs-heading-anchor" href="#Categoricals-features">Categoricals features</a><a id="Categoricals-features-1"></a><a class="docs-heading-anchor-permalink" href="#Categoricals-features" title="Permalink"></a></h2><p>HTBoost is promising for categorical features, particularly if high dimensionals.   This tutorials shows:</p><ul><li>How to inform HTBoost about categorical features.</li><li>Parameters related to categorical features, and their default values.</li><li>See <a href="../../tutorials/Categoricals/">Categorical features</a> for a comparison with LightGBM and CatBoost, with discussion.  </li></ul><h3 id="How-to-inform-HTBoost-about-categorical-features-in-R"><a class="docs-heading-anchor" href="#How-to-inform-HTBoost-about-categorical-features-in-R">How to inform HTBoost about categorical features in R</a><a id="How-to-inform-HTBoost-about-categorical-features-in-R-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-inform-HTBoost-about-categorical-features-in-R" title="Permalink"></a></h3><p>When y and/or x contain strings (categorical features), we must translate our R dataframe into a Julia DataFrame, which is then fed to HTBdata(), e.g. (continuing from the previous example)</p><pre><code class="language-r hljs">x_string =  sample(c(&quot;v1&quot;, &quot;v2&quot;, &quot;v3&quot;), n, replace = TRUE)   # create a categorical with 3 values
df       = data.frame(x,x_string)                          # R dataframe 
x        = DataFrames$DataFrame(df)                          # x is a Julia dataframe
data     = HybridTreeBoosting$HTBdata(y,x,param,fnames=colnames(df))    # pass the column names 
output   = HybridTreeBoosting$HTBfit(data,param)                        
</code></pre><p>Columns of string values are automatically interpreted by HTBoost as a categorical. If some categorical features are represented by numerical values, it is necessary to list them in param (in which case all categorical features, even strings, must be listed). This can be done either with a vector of their column positions, or with their names, if fnames (an optional argument) is provided to HTBdata()</p><pre><code class="language-r hljs"># either 
param = HybridTreeBoosting$HTBparam(cat_features=c(3))
data  = HybridTreeBoosting$HTBdata(y,x,param)    # passing the column names is optional

# or
param = HybridTreeBoosting$HTBparam(cat_features=c(&quot;x_string&quot;))
data  = HybridTreeBoosting$HTBdata(y,x,param,fnames=colnames(df))    # passing the column names is required
</code></pre><p>See <a href="../../examples/Categoricals/">examples/Categoricals</a> for a discussion of how HTBoost treats categoricals under the hood. Key points:</p><ul><li>Missing values are assigned to a new category.</li><li>If there are only 2 categories, a 0-1 dummy is created. For anything more than two categories, it uses a variation of target encoding.</li><li>The categories are encoded by 4 values in default mode: mean, frequency, variance (robust) and skew(robust). (For financial variables, the variance and skew may be more informative than the mean.) Set cat<em>representation</em>dimension = 1 to encode by mean only.</li><li>One-hot-encoding with more than 2 categories is not supported, but can of course be implemented as data preprocessing.</li></ul><h2 id="Cross-validation-of-categorical-parameters"><a class="docs-heading-anchor" href="#Cross-validation-of-categorical-parameters">Cross-validation of categorical parameters</a><a id="Cross-validation-of-categorical-parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Cross-validation-of-categorical-parameters" title="Permalink"></a></h2><p><code>param$cv_categoricals</code> can be used to perform a rough cross-validation of <code>n0_cat</code> and/or <code>mean_encoding_penalization</code>, as follows:</p><ul><li><code>cv_categoricals = &quot;none&quot;</code> uses default parameters </li><li><code>cv_categoricals = &quot;penalty&quot;</code> runs a rough cv the penalty associated to the number of categories; recommended if n/n_cat if high for any feature, particularly if SNR is low                             </li><li><code>cv_categoricals = &quot;n0&quot;</code> runs a rough of cv the strength of the prior shrinking categorical values to the overall mean; recommended with highly unequal number of observations in different categories.</li><li><code>cv_categoricals = &quot;both&quot;</code> runs a rough cv of penalty and n0 </li></ul><p>The default is &quot;none&quot; if :modality in (&quot;fastest&quot;,&quot;fast&quot;), &quot;penalty&quot; if &quot;compromise&quot;, and &quot;both&quot; if &quot;accurate&quot;. </p><h3 id="Comparison-to-LightGBM-and-CatBoost"><a class="docs-heading-anchor" href="#Comparison-to-LightGBM-and-CatBoost">Comparison to LightGBM and CatBoost</a><a id="Comparison-to-LightGBM-and-CatBoost-1"></a><a class="docs-heading-anchor-permalink" href="#Comparison-to-LightGBM-and-CatBoost" title="Permalink"></a></h3><p>Different packages differ substantially in their treatment of categorical features.   LightGBM does not use target encoding, and can completely break down (very poor in-sample and oos fit) when the number of categories is high in relation to n (e.g. n=10k, #cat=1k). The LightGBM manual suggests treating high dimensional categorical features as numerical or embedding them in a lower-dimensional space. LightGBM can, however, perform very well in lower-dimensional cases.</p><p>CatBoost, in contrast, adopts mean target encoding as default, can handle very high dimensionality and has a sophisticated approach to avoiding data leakage which HTBoost is missing. (HTBoost resorts to a penalization on categorical features instead.) CatBoost also interacts categorical features, while HTBoost does not. In spite of the less sophisticated treatment of categoricals, in this simple simulation set-up HTBoost substantially outperforms CatBoost if n_cat is high and the categorical feature interacts with the continuous feature, presumably because target encoding generates smooth functions  by construction in this setting.</p><p>It seems reasonable to assume that high dimensional target encoding, by its very nature, will generate smooth functions in many settings, making  HTBoost a promising tool for high dimensional categorical features. The current treatment of categorical features is however quite crude compared to CatBoost, so some of these gains are not yet realized. </p><p>See <a href="../../tutorials/Categoricals/">Categorical features</a> for a comparison with LightGBM and CatBoost on simulated data, with discussion.</p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Saturday 22 February 2025 21:26">Saturday 22 February 2025</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>

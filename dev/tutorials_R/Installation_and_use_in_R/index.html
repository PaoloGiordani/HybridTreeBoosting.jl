<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Installation and Introduction to the R bindings of HTBoost.jl · HybridTreeBoosting.jl</title><meta name="title" content="Installation and Introduction to the R bindings of HTBoost.jl · HybridTreeBoosting.jl"/><meta property="og:title" content="Installation and Introduction to the R bindings of HTBoost.jl · HybridTreeBoosting.jl"/><meta property="twitter:title" content="Installation and Introduction to the R bindings of HTBoost.jl · HybridTreeBoosting.jl"/><meta name="description" content="Documentation for HybridTreeBoosting.jl."/><meta property="og:description" content="Documentation for HybridTreeBoosting.jl."/><meta property="twitter:description" content="Documentation for HybridTreeBoosting.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">HybridTreeBoosting.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../Parameters/">Parameters</a></li><li><a class="tocitem" href="../../JuliaAPI/">API</a></li><li><a class="tocitem" href="../../Tutorials/">Tutorials (Julia)</a></li><li><a class="tocitem" href="../../Examples/">Examples (Julia)</a></li><li><a class="tocitem" href="../../Tutorials_R/">Tutorials (R)</a></li><li><a class="tocitem" href="../../Tutorials_py/">Tutorials (Python)</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Installation and Introduction to the R bindings of HTBoost.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Installation and Introduction to the R bindings of HTBoost.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/PaoloGiordani/HybridTreeBoosting.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/PaoloGiordani/HybridTreeBoosting.jl.git" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Installation-and-Introduction-to-the-R-bindings-of-HTBoost.jl"><a class="docs-heading-anchor" href="#Installation-and-Introduction-to-the-R-bindings-of-HTBoost.jl">Installation and Introduction to the R bindings of HTBoost.jl</a><a id="Installation-and-Introduction-to-the-R-bindings-of-HTBoost.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Installation-and-Introduction-to-the-R-bindings-of-HTBoost.jl" title="Permalink"></a></h1><h2 id="Install-Julia"><a class="docs-heading-anchor" href="#Install-Julia">Install Julia</a><a id="Install-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Install-Julia" title="Permalink"></a></h2><p>Ensure Julia is installed.  Julia can be downloaded from (https://julialang.org/downloads/)</p><h2 id="Each-script-should-start-with-the-following-4-steps"><a class="docs-heading-anchor" href="#Each-script-should-start-with-the-following-4-steps">Each script should start with the following 4 steps</a><a id="Each-script-should-start-with-the-following-4-steps-1"></a><a class="docs-heading-anchor-permalink" href="#Each-script-should-start-with-the-following-4-steps" title="Permalink"></a></h2><h4 id="1.-Ensure-that-the-Julia-executable-is-in-the-system-search-path."><a class="docs-heading-anchor" href="#1.-Ensure-that-the-Julia-executable-is-in-the-system-search-path.">1. Ensure that the Julia executable is in the system search path.</a><a id="1.-Ensure-that-the-Julia-executable-is-in-the-system-search-path.-1"></a><a class="docs-heading-anchor-permalink" href="#1.-Ensure-that-the-Julia-executable-is-in-the-system-search-path." title="Permalink"></a></h4><p>In most cases this should not be necessary, but if R cannot find the path:  </p><ul><li><p>To find the path to the Julia executable, run the following command in Julia: <code>julia Sys.BINDIR</code></p></li><li><p>Set the path at the start of your R script (only the path, excluding julia.exe)</p></li></ul><pre><code class="language-r hljs">julia_path = &quot;C:\\Users\\.julia\\juliaup\\julia-1.11.2+0.x64.w64.mingw32\\bin&quot;  # replace with your path
Sys.setenv(JULIA_BINDIR = julia_path)</code></pre><h4 id="2.-Install-JuliaConnectoR-package-(if-not-already-installed)-and-load-it"><a class="docs-heading-anchor" href="#2.-Install-JuliaConnectoR-package-(if-not-already-installed)-and-load-it">2. Install JuliaConnectoR package (if not already installed) and load it</a><a id="2.-Install-JuliaConnectoR-package-(if-not-already-installed)-and-load-it-1"></a><a class="docs-heading-anchor-permalink" href="#2.-Install-JuliaConnectoR-package-(if-not-already-installed)-and-load-it" title="Permalink"></a></h4><pre><code class="language-r hljs">if (!require(JuliaConnectoR)) {
  install.packages(&quot;JuliaConnectoR&quot;)
}

library(JuliaConnectoR)</code></pre><h4 id="3.-Install-the-Julia-packages-Distributed,-DataFrames,-HTBoost-(if-not-already-installed),-and-load-them."><a class="docs-heading-anchor" href="#3.-Install-the-Julia-packages-Distributed,-DataFrames,-HTBoost-(if-not-already-installed),-and-load-them.">3. Install the Julia packages Distributed, DataFrames, HTBoost (if not already installed), and load them.</a><a id="3.-Install-the-Julia-packages-Distributed,-DataFrames,-HTBoost-(if-not-already-installed),-and-load-them.-1"></a><a class="docs-heading-anchor-permalink" href="#3.-Install-the-Julia-packages-Distributed,-DataFrames,-HTBoost-(if-not-already-installed),-and-load-them." title="Permalink"></a></h4><p>Installation is needed only once, and can be done from Julia or in R using the JuliaConnectoR package as follows:</p><pre><code class="language-r hljs">juliaEval(&#39;using Pkg; Pkg.add(&quot;Distributed&quot;)&#39;)
juliaEval(&#39;using Pkg; Pkg.add(&quot;DataFrames&quot;)&#39;)</code></pre><p>To install HTBoost from the registry, use the following command.</p><pre><code class="language-r hljs">juliaEval(&#39;using Pkg; Pkg.add(&quot;HybridTreeBoosting&quot;)&#39;)</code></pre><p>Alternatively, this will work even if the package is not in the registry.</p><pre><code class="language-r hljs">juliaEval(&#39;using Pkg; Pkg.add(&quot;https://github.com/PaoloGiordani/HybridTreeBoosting.jl&quot;)&#39;)</code></pre><p>Load the packages </p><pre><code class="language-r hljs">HTBoost = juliaImport(&quot;HybridTreeBoosting&quot;)
DataFrames = juliaImport(&quot;DataFrames&quot;)   
#RData = juliaImport(&quot;RData&quot;)    # not required by HTBoost, can be convenient to work with R datasets in Julia</code></pre><h4 id="4.-Set-the-desired-number-of-workers-(cores)-to-be-used-in-parallel."><a class="docs-heading-anchor" href="#4.-Set-the-desired-number-of-workers-(cores)-to-be-used-in-parallel.">4. Set the desired number of workers (cores) to be used in parallel.</a><a id="4.-Set-the-desired-number-of-workers-(cores)-to-be-used-in-parallel.-1"></a><a class="docs-heading-anchor-permalink" href="#4.-Set-the-desired-number-of-workers-(cores)-to-be-used-in-parallel." title="Permalink"></a></h4><pre><code class="language-r hljs">juliaEval(&#39;
           number_workers  = 8  # desired number of workers, e.g. 8
           using Distributed
           nprocs()&lt;number_workers ? addprocs( number_workers - nprocs()  ) : addprocs(0)
           @everywhere using HybridTreeBoosting
           &#39;)</code></pre><h2 id="Running-HTBoost"><a class="docs-heading-anchor" href="#Running-HTBoost">Running HTBoost</a><a id="Running-HTBoost-1"></a><a class="docs-heading-anchor-permalink" href="#Running-HTBoost" title="Permalink"></a></h2><p>The most important functions in HTBoost are</p><pre><code class="language-r hljs">param  = HybridTreeBoosting$HTBparam()           # defines the model     
data   = HybridTreeBoosting$HTBparam(y,x,param)  # defines the data, including optional features such as names, weights, time
output = HybridTreeBoosting$HTBfit(data,param)   # fits the model 
yf     = HybridTreeBoosting$HTBpredict(x_predict,output)
t      = HybridTreeBoosting$HTBweightedtau(output,data)  # variable importance and smoothness
t      = HybridTreeBoosting$HTBpartialplot(data,output,c(1,2))  # partial dependence plots, here for the first two features  </code></pre><h2 id="Further-notes-on-using-HybridTreeBoosting-in-R"><a class="docs-heading-anchor" href="#Further-notes-on-using-HybridTreeBoosting-in-R">Further notes on using HybridTreeBoosting in R</a><a id="Further-notes-on-using-HybridTreeBoosting-in-R-1"></a><a class="docs-heading-anchor-permalink" href="#Further-notes-on-using-HybridTreeBoosting-in-R" title="Permalink"></a></h2><h3 id="To-translate-the-Julia-tutorials-in-R"><a class="docs-heading-anchor" href="#To-translate-the-Julia-tutorials-in-R">To translate the Julia tutorials in R</a><a id="To-translate-the-Julia-tutorials-in-R-1"></a><a class="docs-heading-anchor-permalink" href="#To-translate-the-Julia-tutorials-in-R" title="Permalink"></a></h3><ul><li>Apologies to all the R purists for often using = everywhere instead of distinguishing between functions and assignments (= and &lt;-).</li><li>My versioning of Julia code to R is probably amateurish. Feel free to improve it. </li><li>Change Julia symbols to R strings. e.g. :modality to &quot;modality&quot;, :On to &quot;On&quot;</li><li>Change Julia true/false to R TRUE/FALSE </li><li>Change Julia vectors [1,2,3] to R vectors c(1,2,3)</li><li>The output of each function in Julia is a named tuple. This corresponds to a list in R, whose elements can be accessed in the usual way, e.g. </li></ul><pre><code class="language-r hljs">  ntrees = output$ntrees  </code></pre><p>Should this fail, we can use juliaGet() to translate the Julia object into a proper R list, e.g.  </p><pre><code class="language-r hljs">  list = juliaGet(output)
  ntrees = list$ntrees  </code></pre><ul><li>In the tutorials the output of a function is sometimes given by several variables, e.g. (see Zero<em>inflated</em>y.md) in Julia </li></ul><pre><code class="language-julia hljs">    yf,prob0,yf_not0     = HTBpredict(x_test,output)</code></pre><p>This will not work in R, but it is always possible to work with the list, so R becomes</p><pre><code class="language-r hljs">    t = HybridTreeBoosting$HTBpredict(x_test,output)
    prob0 = t$prob0 </code></pre><h3 id="Getting-your-data-from-R-to-HTBoost"><a class="docs-heading-anchor" href="#Getting-your-data-from-R-to-HTBoost">Getting your data from R to HTBoost</a><a id="Getting-your-data-from-R-to-HTBoost-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-your-data-from-R-to-HTBoost" title="Permalink"></a></h3><p>If y and x are numerical matrices, they can be taken into HTBdata() directly, e.g. </p><pre><code class="language-r hljs">n      = 1000 
p      = 2  
x      = matrix(rnorm(n*p),nrow = n,ncol = p)
y      = x[,1] + rnorm(n)

param   = HybridTreeBoosting$HTBparam(modality=&quot;accurate&quot;)  
data   = HybridTreeBoosting$HTBdata(y,x,param)
output = HybridTreeBoosting$HTBfit(data,param)</code></pre><p>This will work even if there are missing data (<em>NA</em> in R, <em>NaN</em> or <em>missing</em> in Julia) (see <a href="../../tutorials/Missing/">Missing data</a>) for how HTBoost deals with missing data internally, delivering superior accuracy if the underlying function is at least partially smooth.  </p><p>When y and/or x contain strings (categorical features), we must translate our R dataframe into a Julia DataFrame, which is then fed to HTBdata(), e.g. (continuing from the previous example)</p><pre><code class="language-r hljs">x_string =  sample(c(&quot;v1&quot;, &quot;v2&quot;, &quot;v3&quot;), n, replace = TRUE)   # create a categorical with 3 values
df       = data.frame(x,x_string)                          # R dataframe 
x        = DataFrames$DataFrame(df)                          # x is a Julia dataframe
data     = HybridTreeBoosting$HTBdata(y,x,param,fnames=colnames(df))    # pass the column names 
output   = HybridTreeBoosting$HTBfit(data,param)                        
</code></pre><p>Columns of string values are automatically interpreted by HTBoost as a categorical. If some categorical features are represented by numerical values, it is necessary to list them in param (in which case all categorical features, even strings, must be listed). This can be done either with a vector of their column positions, or with their names, if fnames (an optional argument) is provided to HTBdata()</p><pre><code class="language-r hljs"># either 
param = HybridTreeBoosting$HTBparam(cat_features=c(3))
data  = HybridTreeBoosting$HTBdata(y,x,param)    # passing the column names is optional

# or
param = HybridTreeBoosting$HTBparam(cat_features=c(&quot;x_string&quot;))
data  = HybridTreeBoosting$HTBdata(y,x,param,fnames=colnames(df))    # passing the column names is required
</code></pre></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Saturday 22 February 2025 17:35">Saturday 22 February 2025</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
